<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>⚽ E-Football Tournament</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h2 {
      color: #333;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: 1px solid #ccc;
      margin-bottom: 30px;
    }
    .admin {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ddd;
      max-width: 400px;
    }
    label, select, input {
      display: block;
      margin-bottom: 10px;
      width: 100%;
    }
    button {
      padding: 10px;
      background: #28a745;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    .fixtures {
      background: #fff;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h2>📊 Group A Table</h2>
  <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQB4css0LHNZEH02H87kgwf3VkheJtYgvqMtw7C0bcGTDZ_Z4LWH4bmXhZ4C7MguGSwYuofvjQOsgyN/pubhtml?gid=0&single=true&widget=true&headers=false"></iframe>

  <h2>📊 Group B Table</h2>
  <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQB4css0LHNZEH02H87kgwf3VkheJtYgvqMtw7C0bcGTDZ_Z4LWH4bmXhZ4C7MguGSwYuofvjQOsgyN/pubhtml?gid=123456789&single=true&widget=true&headers=false"></iframe>

  <div class="fixtures">
    <h2>📅 Fixtures</h2>
    <p>🗓️ <strong>Day 1</strong><br/>
      🅰️ Ezaz 🆚 Arnab<br/>
      🅱️ Surjo 🆚 Mafid<br/>
      🆎 Uchas 🆚 Shami<br/>
      🆑 Kakon 🆚 Tusan
    </p>
    <p>🗓️ <strong>Day 2</strong><br/>
      🅰️ Ezaz 🆚 Ayan<br/>
      🅱️ Rafiul 🆚 Sezan<br/>
      🆎 Yamin 🆚 Rohan<br/>
      🆑 Arman 🆚 Iram
    </p>
  </div>

  <div class="admin">
    <h2>🔐 Admin: Submit Match Result</h2>
    <input type="password" id="adminKey" placeholder="Enter admin code (292929)" />

    <div id="adminForm" style="display:none;">
      <label for="teamA">Team A:</label>
      <select id="teamA"></select>

      <label for="scoreA">Team A Score:</label>
      <input type="number" id="scoreA" min="0" />

      <label for="teamB">Team B:</label>
      <select id="teamB"></select>

      <label for="scoreB">Team B Score:</label>
      <input type="number" id="scoreB" min="0" />

      <button onclick="submitResult()">Submit Result</button>
    </div>
  </div>

  <script>
    const adminCode = "292929";
    const apiURL = "https://script.google.com/macros/s/AKfycbww08i4GpfL0bdVxNJq1E-K0G0eGiiXk9iD6N_OkMe88LXZFGlvEIlkeH5NGe9edbk3/exec";

    document.getElementById("adminKey").addEventListener("input", function () {
      if (this.value === adminCode) {
        document.getElementById("adminForm").style.display = "block";
      } else {
        document.getElementById("adminForm").style.display = "none";
      }
    });

    function loadTeams() {
      // Update this URL to the JSON endpoint or set team list manually
      const teams = [
        "Ezaz", "Arnab", "Ayan", "Salman", "Surjo", "Mafid", "Rafiul", "Sezan",
        "Uchas", "Shami", "Yamin", "Rohan", "Kakon", "Tusan", "Arman", "Iram"
      ];

      const teamASelect = document.getElementById("teamA");
      const teamBSelect = document.getElementById("teamB");

      teams.forEach(team => {
        const optionA = document.createElement("option");
        optionA.value = optionA.textContent = team;
        teamASelect.appendChild(optionA);

        const optionB = document.createElement("option");
        optionB.value = optionB.textContent = team;
        teamBSelect.appendChild(optionB);
      });
    }

    function submitResult() {
      const teamA = document.getElementById("teamA").value;
      const teamB = document.getElementById("teamB").value;
      const scoreA = document.getElementById("scoreA").value;
      const scoreB = document.getElementById("scoreB").value;

      if (!teamA || !teamB || scoreA === "" || scoreB === "") {
        alert("Please fill all fields.");
        return;
      }

      if (teamA === teamB) {
        alert("Teams cannot be the same.");
        return;
      }

      fetch(apiURL, {
        method: "POST",
        body: JSON.stringify({ teamA, teamB, scoreA, scoreB }),
        headers: {
          "Content-Type": "application/json"
        }
      })
        .then(response => response.json())
        .then(data => {
          alert("✅ Result submitted!");
          location.reload(); // Refresh to show updated table
        })
        .catch(error => {
          console.error("Network error:", error);
          alert("❌ Failed to submit result.");
        });
    }

    loadTeams();
  </script>
</body>
</html>
